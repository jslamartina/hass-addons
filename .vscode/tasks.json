{
  "version": "2.0.0",
  // NOTE: Tasks with problem matchers will show "has errors" when issues are detected,
  // even with exit code 0 and severity "warning". This is VS Code's intentional design.
  // See: https://github.com/microsoft/vscode/issues/46439
  //
  // One-shot tasks run once on demand.
  "tasks": [
    {
      "label": "Lint: All",
      "dependsOn": [
        "Lint: Prettier",
        "Lint: Ruff (cync-controller)",
        "Lint: Ruff (python-rebuild-tcp-comm)",
        "Lint: ShellCheck"
      ],
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Prettier",
      "type": "shell",
      "command": "npx prettier --ignore-path .prettierignore --check '**/*.{js,jsx,ts,tsx,json,yaml,yml,sh}' 2>&1 | sed 's/\\x1b\\[[0-9;]*m//g' | grep -vE '^(panic:|Checking formatting|\\[warn\\] Code style)' | sed -n '/^\\[warn\\] /s/^\\[warn\\] \\(.*\\)$/\\1:1:0: Code style issues found. Run npm run format to fix./p' || true",
      "problemMatcher": {
        "owner": "prettier-ci",
        "fileLocation": ["relative", "${workspaceFolder}"],
        "severity": "warning",
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "message": 4
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Ruff (cync-controller)",
      "type": "shell",
      "command": "cd cync-controller && ruff check . --output-format=concise 2>&1 | sed 's/\\x1b\\[[0-9;]*m//g' || true",
      "problemMatcher": {
        "owner": "ruff-ci",
        "fileLocation": ["relative", "${workspaceFolder}/cync-controller"],
        "severity": "warning",
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):\\s+(\\w+)(?:\\s+\\[\\*\\])?\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "code": 4,
          "message": 5
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Ruff (python-rebuild-tcp-comm)",
      "type": "shell",
      "command": "cd python-rebuild-tcp-comm && ruff check . --output-format=concise 2>&1 | sed 's/\\x1b\\[[0-9;]*m//g' || true",
      "problemMatcher": {
        "owner": "ruff-ci",
        "fileLocation": [
          "relative",
          "${workspaceFolder}/python-rebuild-tcp-comm"
        ],
        "severity": "warning",
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):\\s+(\\w+)(?:\\s+\\[\\*\\])?\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "code": 4,
          "message": 5
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: ShellCheck",
      "type": "shell",
      "command": "${workspaceFolder}/.vscode/scripts/lint-shellcheck.py",
      "problemMatcher": {
        "owner": "shellcheck-ci",
        "fileLocation": ["relative", "${workspaceFolder}"],
        "severity": "warning",
        "pattern": {
          "regexp": "^([^:]+):(\\d+):(\\d+):\\s+\\[.*\\]\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "message": 4
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: All (Fix)",
      "dependsOn": [
        "Lint: Prettier (Fix)",
        "Lint: Ruff (cync-controller) (Fix)",
        "Lint: Ruff (python-rebuild-tcp-comm) (Fix)",
        "Lint: ShellCheck (Fix)"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Prettier (Fix)",
      "type": "shell",
      "command": "npx prettier --ignore-path .prettierignore --write '**/*.{js,jsx,ts,tsx,json,yaml,yml,sh}'",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Ruff (cync-controller) (Fix)",
      "type": "shell",
      "command": "cd cync-controller && ruff check . --fix",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Ruff (python-rebuild-tcp-comm) (Fix)",
      "type": "shell",
      "command": "cd python-rebuild-tcp-comm && ruff check . --fix",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: ShellCheck (Fix)",
      "type": "shell",
      "command": "echo 'Note: ShellCheck does not support auto-fix. Please manually fix issues reported by Lint: ShellCheck.'",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    }
  ]
}
