---
alwaysApply: true
description: Helper scripts and automation tools available in the project
---

# Helper Scripts

## Setup and Configuration

**Fresh Home Assistant Setup:**
```bash
./scripts/setup-fresh-ha.sh  # Automated user, EMQX, addon setup (idempotent)
```

**Configure Add-on:**
```bash
./scripts/configure-addon.sh get                    # Show config
./scripts/configure-addon.sh preset-baseline        # LAN-only mode
./scripts/configure-addon.sh preset-relay-with-forward  # Cloud relay
./scripts/configure-addon.sh restart                # Restart
```

## Entity Management

**Delete MQTT Entities:**
```bash
sudo python3 scripts/delete-mqtt-safe.py --dry-run  # Preview
sudo python3 scripts/delete-mqtt-safe.py            # Delete
sudo python3 scripts/delete-mqtt-safe.py --restart  # Delete + restart
```

## Testing

**Unit Tests:**
```bash
cd cync-controller
pytest tests/unit/                    # All tests
pytest tests/unit/test_devices.py     # Specific file
pytest -k "test_set_power"            # Pattern match
```

**Cloud Relay Test Suite:**
```bash
./scripts/test-cloud-relay.sh  # Full automated test
```

## Script Features

**Idempotent:** All scripts safe to run multiple times.

**Error handling:** All scripts use `set -e` for early exit.

**Use helper scripts** instead of manual operations.
