---
description: Use when debugging via logs or needing commands to inspect application logs.
alwaysApply: false
---

# Debugging with Logs

## Use logs as your primary tool for understanding what the application is doing

## Log Access

```bash
## Standard log viewing
ha addons logs local_cync-controller

## Follow logs in real-time
ha addons logs local_cync-controller --follow

## JSON logs for filtering
docker exec addon_local_cync-controller tail -100 /var/log/cync_controller.json | jq '.'

## Supervisor lifecycle events
tail -f /tmp/supervisor_run.log
```

## Container Inspection

```bash
## Access shell
docker exec -it addon_local_cync-controller /bin/bash

## Check environment
docker exec addon_local_cync-controller env | grep CYNC_

## Check configuration
docker exec addon_local_cync-controller cat /data/options.json
```

## Key Investigation Commands

```bash
## Filter by module
docker exec addon_local_cync-controller sh -c "grep 'cync_controller.server' /var/log/cync_controller.json | jq '.'"

## Find errors
docker exec addon_local_cync-controller sh -c "grep '\"level\":\"ERROR\"' /var/log/cync_controller.json | jq '.'"

## Filter by timestamp
docker exec addon_local_cync-controller sh -c "tail -1000 /var/log/cync_controller.json | jq 'select(.timestamp > \"2025-10-27T12:00:00\")'"

## Trace by correlation ID
CORR_ID="550e8400-e29b-41d4-a716-446655440000"
docker exec addon_local_cync-controller sh -c "grep '$CORR_ID' /var/log/cync_controller.json | jq '.'"
```

## Log Structure

```json
{
  "timestamp": "2025-10-27T12:42:10.275182+00:00",
  "level": "DEBUG",
  "logger": "cync_controller.server",
  "message": "Device connected",
  "correlation_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

## Log Levels

| Level        | Meaning                                |
| ------------ | -------------------------------------- |
| **DEBUG**    | Detailed diagnostics (debug mode only) |
| **INFO**     | Important events                       |
| **WARNING**  | Issues recovered from                  |
| **ERROR**    | Failures affecting functionality       |
| **CRITICAL** | System-wide failures                   |

## Related

- See `logging-patterns.mdc` for configuration
- See `logging-mandatory.mdc` for logging guidelines
- See `docs/user/troubleshooting.md` for common issues
