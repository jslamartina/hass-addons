---
description: Important devcontainer setup and quirks
---

# Devcontainer Quirks & Setup

⚠️ **READ FIRST:** [.devcontainer/README.md](mdc:.devcontainer/README.md) contains critical setup information.

## Key Points

### Docker & Supervisor

- **Supervisor is auto-started** - Don't manually start Docker
- **Log filtering enabled** - Check [.devcontainer/post-start.sh](mdc:.devcontainer/post-start.sh) for log configuration
- **Backup restore** - Currently disabled in post-start.sh (lines 131-216)
  - To re-enable: Uncomment those lines and test thoroughly

### Fresh HA Setup

```bash
cd scripts
./setup-fresh-ha.sh  # Automated onboarding, EMQX install, addon config
```

### Credentials

Access Home Assistant at `http://localhost:8123`
- **Username:** `dev`
- **Password:** `dev`
- See [hass-credentials.env](mdc:hass-credentials.env) for credentials

### Scripts Access

⚠️ **Important:** Scripts that call Supervisor API must run inside `hassio_cli` container:

```bash
# ❌ WRONG - Will fail with "Could not resolve host: supervisor"
./scripts/configure-addon.sh get

# ✅ CORRECT - Use ha CLI or docker exec hassio_cli
ha addons info local_cync-controller
docker exec hassio_cli curl -sf http://supervisor/...
```

## Common Commands

```bash
ha addons logs local_cync-controller --follow    # View logs
ha addons restart local_cync-controller           # Restart addon
ha addons rebuild local_cync-controller           # Rebuild (Python changes)
npm run lint                                       # Check all linters
```

See [AGENTS.md](mdc:AGENTS.md) for full command reference.
